@import "tailwindcss";

@variant dark (&:where(.dark, .dark *));

@theme {
  --animate-wave: wave 20s linear infinite;
  --animate-wave-reverse: wave-reverse 25s linear infinite;
}

@keyframes wave {
  0% { transform: translateX(0%); }
  100% { transform: translateX(-100%); }
}

@keyframes wave-reverse {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(0%); }
}

@layer base {
  :root {
    color-scheme: light;
  }

  html {
    background-color: white;
  }

  html.dark {
    color-scheme: dark;
    background-color: black;
  }

  body {
    background-color: inherit;
  }
}

/*
 * Глобальные transition для смены темы.
 * GITHUB PAGES: работает нормально.
 * VDS: тоже ок, менять не нужно.
 */
*, 
*::before, 
*::after {
  transition-property: background-color, border-color, color, fill, stroke;
  transition-duration: 700ms;
  transition-timing-function: ease-in-out;
}

/* ============================================================
 * js-loading — скрываем контент до загрузки, чтобы не было
 * flash белого/тёмного фона при смене темы.
 *
 * ФИКС: добавлен transition: none чтобы opacity убиралась
 * мгновенно, без анимации. Также layout.tsx теперь имеет
 * fallback setTimeout(300мс) — класс точно уберётся даже
 * если DOMContentLoaded не сработает на GitHub Pages.
 * ============================================================ */
html.js-loading * {
  opacity: 0 !important;
  transition: none !important; /* важно: не анимируем скрытое состояние */
}

@media (max-width: 767px) {
  body {
    scrollbar-width: none;
  }

  ::-webkit-scrollbar {
    display: none;
  }
}

@media (min-width: 768px) {
  ::-webkit-scrollbar {
    width: 10px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-400/30 rounded-full hover:bg-gray-400/50 transition-colors;
  }

  .dark ::-webkit-scrollbar-thumb {
    @apply bg-gray-600/30 hover:bg-gray-600/50;
  }
}

/*
html.js-loading * { // выше: поменял для GitHub Pages
  opacity: 0;
}
*/

html, body {
  min-height: 100dvh;
  background-color: inherit;
  contain: content;
}

body {
  @apply text-black dark:text-white;
  overscroll-behavior: none;
  -webkit-tap-highlight-color: transparent;
  contain: content;
}

:root {
  --overscroll: #ffffff;
}

[data-theme="dark"] {
  --overscroll: #000000;
}

input, textarea {
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500/50 dark:focus:ring-blue-400/50;
}

/* cache-bust: 1 */